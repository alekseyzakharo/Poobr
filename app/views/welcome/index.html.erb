<script src="//maps.google.com/maps/api/js?v=3.23&key=AIzaSyBpddVNcGqaAbnuDB9TiYH51H4irqUP37o"></script>
<script src="//cdn.rawgit.com/mahnunchik/markerclustererplus/master/dist/markerclusterer.min.js"></script>
<script src='//cdn.rawgit.com/printercu/google-maps-utility-library-v3-read-only/master/infobox/src/infobox_packed.js' type='text/javascript'></script>

<script>

</script>


<h1>Welcome to Poobr!</h1>
<!--<div class="box" style="width:22%; float:left; margin-right:2%; margin-top:-2%; padding:0em;">
  <p>
    Poobr is a new way to quickly find - or share - a bathroom!
    Create your account to start exploring today!
    <br>
    <br>
    <%= link_to "Create your account now!", new_user_path %>
  </p>
</div>
<div class="box" style="width:65%; float:left; margin-top:-4em; padding:0em;">
  <%= image_tag("poobr.png", width:'100 %') %>

</div>-->

<!-- search box -->
<!--<input type="text" id="search_address" value=""/>
<button onclick="search();">Search</button>-->

<% flash.each do |key, value| %>
    <center><div class="alert alert-<%= key %>"><%= value %></div></center>
<% end %>


<%= form_tag("/search", method: :get, class: " navbar-form") do %>
  <%= text_field_tag :search, params[:search], placeholder: "city, province, zip, address", class: "form-control" %>
  <%= select_tag :km, options_for_select([["within 1 km", "1"], ["within 2 km", "2"], ["within 5 km", "5"]]), class: "form-control" %>
  <%= submit_tag "Find Poobr's", name: nil, :class => "btn btn-info" %>
<% end %>


<div style='width: 800px;margin:0 auto;'>
  <div id="map" style='width: 800px; height: 400px;'></div>
</div>

<script type="text/javascript">
handler = Gmaps.build('Google');
handler.buildMap({
	provider: { },
	internal: {id: 'map'}}, function(){
  markers = handler.addMarkers(<%=raw @hash.to_json %>);
  handler.bounds.extendWith(markers);
  handler.fitMapToBounds();
  
});
</script>


<!--<script>
handler = Gmaps.build('Google');
handler.buildMap({ provider: {}, internal: {id: 'map'}}, function(){
  markers = handler.addMarkers(<%=raw @hash.to_json %>);
  handler.bounds.extendWith(markers);
  handler.fitMapToBounds();
  handler.map.centerOn([49.28, -123.116226]);
  handler.getMap().setZoom(14);
});



//  handler.buildMap( {internal: {id: 'map'}}, function(){
  // handler.map is the proxy object created by the gem,
  // where you can add your custom methods,
  // like centerOn
//  handler.map.centerOn([49.28, -123.116226]);

  // handler.getMap() is the google map object
  // you can also access it with handler.map.getServiceObject()
//  handler.getMap().setZoom(14);
//  });






</script>
